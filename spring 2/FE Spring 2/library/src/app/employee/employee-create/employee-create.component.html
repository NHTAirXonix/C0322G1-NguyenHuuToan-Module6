<div class="body">
  <div class="container py-5 my-3">
    <div class="row formRow">
      <div class="col-lg-3"></div>
      <form class="col-lg-6 formRow_create" [formGroup]="employeeForm">
        <div class="mb-3 text-center formRow_create_title">
          <h2>THÊM MỚI NHÂN VIÊN</h2>
        </div>
        <hr>
        <div class="formRow_create_content mx-4">
          <div class="mb-3">
            <div class="row">
              <div class="col-lg-6">
                <label class="form-label">Mã Nhân Viên <span><i>*</i></span></label>
                <input type="text" class="form-control" formControlName="code" placeholder="VD: NV-xxx"
                       (change)="checkCode($event.target.value)">
                <div class="form-text"
                     *ngIf="employeeForm.controls.code.hasError('required') && employeeForm.controls.code.touched">
                  Vui lòng nhập mã nhân viên.
                </div>
                <div class="form-text"
                     *ngIf="employeeForm.controls.code.hasError('pattern') && employeeForm.controls.code.touched">
                  Mã nhân viên phải đúng định dạng: NV-xxx.
                </div>
                <div class="form-text"
                     *ngIf="employeeForm.controls.code.hasError('maxlength') && employeeForm.controls.code.touched">
                  Mã nhân viên không được quá 10 kí tự.
                </div>
                <div class="form-text" *ngIf="isExitsCode == true">Mã nhân viên đã tồn tại. Vui lòng nhập lại.</div>
              </div>
              <div class="col-lg-6">
                <label class="form-label">Họ Và Tên <span><i>*</i></span></label>
                <input type="text" class="form-control" formControlName="name" placeholder="Nhập Họ Tên Nhân Viên">
                <div class="form-text"
                     *ngIf="employeeForm.controls.name.hasError('required') && employeeForm.controls.name.touched">
                  Vui lòng nhập tên nhân viên.
                </div>
                <div class="form-text"
                     *ngIf="employeeForm.controls.name.hasError('pattern') && employeeForm.controls.name.touched">
                  Tên nhân viên phải viết hoa chữ cái đầu.
                </div>
                <div class="form-text"
                     *ngIf="employeeForm.controls.name.hasError('maxlength') && employeeForm.controls.name.touched">
                  Tên nhân viên không được quá 30 kí tự.
                </div>
              </div>
            </div>
          </div>

          <div class="mb-3">
            <div class="row">
              <div class="col-lg-6">
                <label class="form-label">Tên Tài Khoản <span><i>*</i></span></label>
                <input type="text" class="form-control" formControlName="username" placeholder="Nhập Tên Tài Khoản"
                       (change)="checkUsername($event.target.value)">
                <div class="form-text"
                     *ngIf="employeeForm.controls.username.hasError('required') && employeeForm.controls.username.touched">
                  Vui lòng nhập tên tài khoản.
                </div>
                <div class="form-text"
                     *ngIf="employeeForm.controls.username.hasError('maxlength') && employeeForm.controls.username.touched">
                  Tên tài khoản không quá 20 kí tự.
                </div>
                <div class="form-text" *ngIf="isExitsUsername == true">Tên tài khoản đã tồn tại. Vui lòng nhập lại.
                </div>
              </div>
              <div class="col-lg-6">
                <label class="form-label">Mật Khẩu <span><i>*</i></span></label>
                <input type="password" class="form-control" formControlName="password" placeholder="Nhập Mật Khẩu">
                <div class="form-text"
                     *ngIf="employeeForm.controls.password.hasError('required') && employeeForm.controls.password.touched">
                  Vui lòng nhập mật khẩu.
                </div>
                <div class="form-text"
                     *ngIf="employeeForm.controls.password.hasError('minlength') && employeeForm.controls.password.touched">
                  Mật khẩu phải có ít nhất 6 kí tự.
                </div>
                <div class="form-text"
                     *ngIf="employeeForm.controls.password.hasError('maxlength') && employeeForm.controls.password.touched">
                  Mật khẩu không quá 20 kí tự.
                </div>
              </div>
            </div>
          </div>

          <div class="mb-3">
            <div class="row">
              <div class="col-lg-6">
                <label class="form-label">Email <span><i>*</i></span></label>
                <input type="text" class="form-control" formControlName="email" placeholder="Nhập Email"
                       (change)="checkEmail($event.target.value)">
                <div class="form-text"
                     *ngIf="employeeForm.controls.email.hasError('required') && employeeForm.controls.email.touched">
                  Vui lòng nhập email.
                </div>
                <div class="form-text"
                     *ngIf="employeeForm.controls.email.hasError('email') && employeeForm.controls.email.touched">
                  Email không đúng định dạng.
                </div>
                <div class="form-text"
                     *ngIf="employeeForm.controls.email.hasError('maxlength') && employeeForm.controls.email.touched">
                  Email không quá 50 kí tự.
                </div>
                <div class="form-text" *ngIf="isExitsEmail == true">Email đã tồn tại. Vui lòng nhập lại.</div>
              </div>
              <div class="col-lg-6">
                <label class="form-label">Ngày Sinh <span><i>*</i></span></label>
                <input type="date" class="form-control" formControlName="birthDay">
                <div class="form-text"
                     *ngIf="employeeForm.controls.birthDay.hasError('required') && employeeForm.controls.birthDay.touched">
                  Vui lòng nhập ngày sinh.
                </div>
                <div class="form-text"
                     *ngIf="employeeForm.controls.birthDay.hasError('checkAge') && employeeForm.controls.birthDay.touched">
                  Tuổi phải trên 18 và dưới 55 tuổi.
                </div>
                <div class="form-text"
                     *ngIf="employeeForm.controls.birthDay.hasError('checkDay') && employeeForm.controls.birthDay.touched">
                  Ngày sinh không được lớn hơn ngày hiện tại.
                </div>
              </div>
            </div>
          </div>
          <div class="mb-3">
            <div class="row">
              <div class="col-lg-6">
                <div>
                  <label class="form-label">Số CMND <span><i>*</i></span></label>
                  <input type="text" class="form-control" formControlName="idCard" placeholder="Nhập Số CMND"
                         (change)="checkIdCard($event.target.value)">
                  <div class="form-text"
                       *ngIf="employeeForm.controls.idCard.hasError('required') && employeeForm.controls.idCard.touched">
                    Vui lòng nhập số CMND.
                  </div>
                  <div class="form-text"
                       *ngIf="employeeForm.controls.idCard.hasError('pattern') && employeeForm.controls.idCard.touched">
                    Số phải đúng định dạng 12 chữ số.
                  </div>
                  <div class="form-text" *ngIf="isExitsIdCard == true">Số CMND đã tồn tại. Vui lòng nhập lại.</div>
                </div>
              </div>
              <div class="col-lg-6">
                <label class="form-label">Giới Tính <span><i>*</i></span></label><br>
                <div class="form-check form-check-inline mt-2">
                  <input class="form-check-input" type="radio" value="Nam" formControlName="gender"> Nam
                </div>
                <div class="form-check form-check-inline">
                  <input class="form-check-input" type="radio" value="Nữ" formControlName="gender"> Nữ
                </div>
                <div class="form-check form-check-inline">
                  <input class="form-check-input" type="radio" value="Khác" formControlName="gender"> Khác
                </div>
                <div class="form-text"
                     *ngIf="employeeForm.controls.gender.hasError('required') && employeeForm.controls.gender.touched">
                  Vui lòng nhập giới tính.
                </div>
              </div>
              <div class="col-lg-12 mt-3">
                <label class="form-label">Chọn Ảnh <span><i>*</i></span></label>
                <input type="file" class="form-control" (change)="selectFile($event); onFileSelected($event)">
                <img *ngIf="!editImageState" [src]="employeeForm.get('image').value" width="100%" height="auto">
                <img class="form-control mt-2" [src]="url" *ngIf="editImageState" width="100%" height="auto">
                <div class="form-text" *ngIf="checkImgSize == true">Kích thước ảnh quá lớn !!</div>
                <div class="form-text" *ngIf="checkImg == true && checkImgSize == false && regexImageUrl == false">Vui
                  lòng chọn ảnh.
                </div>
                <div class="form-text" *ngIf="regexImageUrl == true && checkImgSize == false">Chỉ chấp nhận ảnh có định
                  dạng .jpg.
                </div>
              </div>
            </div>
          </div>
          <div class="d-grid gap-2 d-md-flex justify-content-md-around">
            <a routerLink="/employee" class="btn btn-outline-danger"> Quay lại </a>
            <button type="submit" *ngIf="loader" class="btn btn-outline-success" (click)="submitImage()"
                    [disabled]="!employeeForm.valid"> Thêm mới
            </button>
            <button *ngIf="!loader" class="btn btn-outline-success disabled">
              <div class="spinner-border spinner-border-sm me-1"></div>
              Đang tải ...
            </button>
            <button type="reset" class="btn btn-outline-secondary" (click)="reset()"> Nhập lại</button>
          </div>
        </div>
      </form>
      <div class="col-lg-3"></div>
    </div>
  </div>
</div>
